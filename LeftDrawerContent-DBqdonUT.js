import{c as b,j as e,d as N,u as D,g as p,v as O,s as L,a as k,b as _,r as i,M as j,S as m,H as C,T as h,B as c,L as P,e as d,f as l,h as u,i as T,k as E,l as y,m as S,n as f,o as F,p as B,D as M}from"./index-D4E7ewnf.js";const R=b(e.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),z=t=>{const s=O();return L(k(_,s),{id:s,name:t})},H=(t,s)=>D(p([t]),{name:s}),V=t=>N(p([t])),v=t=>!!t.trim().length,x={categoryNameInput:"addCategoryName"},w=t=>{const[,s]=i.useActionState(async(o,a)=>{const n=a.get(x.categoryNameInput);return v(n)&&(z(n),t(n)),null},null);return{fieldNames:x,onSubmit:s}},g={categoryNameInput:"updateCategoryName"},G=t=>{const[,s]=i.useActionState(async(o,a)=>{const n=a.get(g.categoryNameInput);return v(n)&&H(t.id,n),null},null);return{fieldNames:g,onSubmit:s}},U=()=>{const[t,s]=i.useState(!1),{fieldNames:o,onSubmit:a}=w(()=>s(!1));return e.jsx(j,{trigger:e.jsx(P,{text:"Добавить категорию",icon:e.jsx(R,{})}),closeOnInnerClick:!1,opened:t,onChangeOpened:s,children:e.jsxs(m,{component:"form",action:a,sx:{gap:1},children:[e.jsx(C,{fontSize:24,children:"Создание категории техники"}),e.jsx(h,{name:o.categoryNameInput,id:"standard-basic",label:"Название категории",variant:"standard",fullWidth:!0}),e.jsx(c,{type:"submit",variant:"contained",sx:{mt:4},children:"Создать"})]})})},W=({category:t,isActive:s,onSelect:o})=>{const[a,n]=i.useState(!1),{fieldNames:r,onSubmit:I}=G(t),A=()=>V(t.id);return e.jsx(j,{trigger:e.jsx(d,{disablePadding:!0,children:e.jsx(l,{selected:s,children:e.jsx(u,{primary:t.name})})}),closeOnInnerClick:!1,opened:a,onChangeOpened:n,triggerContainerStyles:{justifyContent:"center"},children:e.jsxs(m,{component:"form",action:I,sx:{gap:1},children:[e.jsx(C,{fontSize:24,children:"Управление категорией"}),e.jsx(h,{defaultValue:t.name,name:r.categoryNameInput,id:"standard-basic",label:"Название категории",variant:"standard",fullWidth:!0}),e.jsxs(m,{onClick:()=>n(!1),flexDirection:"row",sx:{mt:4,gap:1},children:[e.jsx(c,{variant:"contained",onClick:o,children:"Выбрать"}),e.jsx(c,{type:"submit",variant:"contained",children:"Переименовать"}),e.jsx(c,{variant:"contained",onClick:A,children:"Удалить"})]})]})})},Y=()=>{const{data:t,isLoading:s}=T(),o=E(),a=y();return s?e.jsx(S,{}):e.jsxs(f,{children:[e.jsx(U,{}),e.jsx(d,{disablePadding:!0,children:e.jsx(l,{onClick:()=>a("category",""),selected:!o,children:e.jsx(u,{primary:"Все категории"})})}),t.map(n=>e.jsx(W,{category:n,isActive:o===n.id,onSelect:()=>a("category",n.id)},n.id))]})},q=()=>{const{data:t,isLoading:s}=F(),o=B(),a=y(),n=r=>a("status",r);return s?e.jsx(S,{}):e.jsxs(f,{children:[e.jsx(d,{disablePadding:!0,children:e.jsx(l,{onClick:()=>n(""),selected:!o,children:e.jsx(u,{primary:"Любой статус"})})}),t.map(r=>e.jsx(J,{status:r,isActive:o===r.id,onSelect:n},r.id))]})},J=i.memo(({status:t,isActive:s,onSelect:o})=>{const a=()=>o(t.id);return e.jsx(d,{disablePadding:!0,children:e.jsx(l,{onClick:a,selected:s,children:e.jsx(u,{primary:t.name})})})}),Q=()=>e.jsxs(e.Fragment,{children:[e.jsx(q,{}),e.jsx(M,{}),e.jsx(Y,{})]});export{Q as default};
